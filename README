(C) Copyright 2006,2007 The Apache Software Foundation.
----------------------------------------------------------------------

The code in this directory contains the code for the benchmark sample called Day Trader.  This sample was contributed by IBM to the Apache Geronimo project under the ASF license to further functional and performance testing of Geronimo.  


BUILD
-----
To build the dayTrader EAR, you need to have Maven 2.0.5 or later installed.   This can be found at http://maven.apache.org.  Once installed you can build DayTrader by executing the following command from the dayTrader root directory (the directory containing this README).:

        mvn clean install

This will build the daytrader-jms, daytrader-derby-datasource, daytrader-jetty and daytrader-tomcat plugins.

INSTALL
--------

After building daytrader, you can go to admin console to install the daytrader-jetty or daytrader-tomcat plugin. Alternatively, you can install them via the "deploy/list-plugins" command, for example:

gsh deploy/list-plugins -u system -w manager -r file:/<your-local-maven-repo> org.apache.geronimo.daytrader/daytrader-tomcat/2.2-SNAPSHOT/car

For app clients, you'll have to install them using deploy install-plugin commands for now, before we publish the app client plugins on a public repo, for example: 

./gsh deploy/install-plugin -u system -w manager $DAYTRADER_HOME/daytrader-tomcat/target/daytrader-ws-client-2.2-SNAPSHOT.car
./gsh deploy/install-plugin -u system -w manager $DAYTRADER_HOME/daytrader-tomcat/target/daytrader-streamer-client-2.2.car 


You will need to create the database and populate the initial data into the database.  Make sure Geronimo is started and the GERONIMO_HOME environment variable is defined.

1. If you want to use the embedded Cloudscape database, you can populate tables and data by visiting http://localhost:8080/daytrader/ in your browser.

2. If you want to use a DB2 database as a back-end database provider, please copy DB2 jdbc drivers to server's repository and use the daytrader-db2-datasource plugin instead.    

3. If you want to use an Oracle database as a back-end database provider, please copy the ojdbc14.jar file from your oracle server to %GERONIMO_HOME%\repository\oracle\ojdbc14\10g and rename the ojdbc14.jar to a maven-recognizable format like ojdbc14-10g.jar.   PLease use the daytrader-oracle-datasource plugin instead.

RUN
---
Access the dayTrader application at http://<hostname>:<port>/daytrader.
To begin trading, go to 'Configuration -> (Re)-populate Trade Database'.
This creates a fictional set of users, stocks, prices, etc. in the database and may take a while.
After this you can go to 'Go Trade!' to begin trading.

There are two application clients you can run, the streamer client and web services client.  To run these (from the geronimo bin directory):
   TradeStreamerAppClient:
      client.[bat|sh] org.apache.geronimo.daytrader/daytrader-streamer-client/2.2-SNAPSHOT/car -waitForMain
   wsappclient:
      client.[bat|sh] org.apache.geronimo.daytrader/daytrader-ws-client/2.2-SNAPSHOT/car -waitForMain


UNINSTALL
---------
To uninstall daytrader, issue the following commands:
        ${GERONIMO_HOME}\bin\deploy.[bat|sh] --user %user% --password %password% undeploy org.apache.geronimo.daytrader/daytrader/2.2-SNAPSHOT/car


ACKNOWLEDGEMENTS
----------------
Many thanks to Gianny Damour and David Jencks for helping to get the sample to its working state at this point.

